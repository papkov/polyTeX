% PolyTeX Beamer Theme 
% (Peter the Great St. Petersburg Polytechnic University)
% Distributed under GNU GPL3
%
% Mikhail Papkov (https://github.com/papkov)
%
% Based on guidelines: https://tex.stackexchange.com/questions/146529/design-a-custom-beamer-theme-from-scratch
%
% June 2017

%%% Background and titlepage 

\mode<presentation>

% Background
\setbeamertemplate{background}{
  \begin{tikzpicture}
  \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
%    \fill[color=polygreen] (0,2) rectangle (2.95,\the\paperheight);
	(0,2)\adjincludegraphics[height=20cm,trim={0 0 {.777\width} 0},clip]{img/pattern.pdf}
%	\fill[color=polygreen] (0,0) rectangle(2.95,1.9);
    \fill[color=polygreen] (2.05,0) rectangle(\the\paperwidth,0.9);
%	(1.05, 0) \raisebox{\paperheight}{\adjincludegraphics[height=7cm]{img/logo.pdf}}

% We want to apply this style only to first and to last page (optional)
    \ifnum\thepage>1
%    \ifnum\insertframenumber<\inserttotalframenumber
    	\relax%
    	\fill[white,opacity=1] (0,0) rectangle(\the\paperwidth,\the\paperheight);
%    \fi
   	\fi
  \end{tikzpicture}
}

% Title page
%\makeatletter
%\newcommand\titlegraphicii[1]{\def\inserttitlegraphicii{#1}}
%\titlegraphicii{}
\defbeamertemplate*{title page}{polytex}[1][]
{ 

	\begin{centering}
		\vspace*{-2.5cm}
		\hspace*{1cm}
		\usebeamercolor[fg]{titlegraphic}{\inserttitlegraphic}\par
	\end{centering}

	
	\vspace*{-2.5cm}
	\begin{beamercolorbox}[sep=8pt,wd=13.7cm,center]{institute}
		\usebeamerfont{institute}\insertinstitute
	\end{beamercolorbox}
	\begin{beamercolorbox}[sep=8pt,wd=13.7cm,center]{title}
		\usebeamerfont{title}\inserttitle\par%
		\ifx\insertsubtitle\@empty%
		\else%
		\vskip0.5cm%
		{\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
		\fi%     
	\end{beamercolorbox}%
	
%	\begin{beamercolorbox}[sep=8pt,wd=13.7cm,center]{date}
%		\usebeamerfont{date}\insertdate
%	\end{beamercolorbox}%\vskip0.5em

	\begin{beamercolorbox}[sep=8pt,wd=13.7cm,center]{author}
		\usebeamerfont{author}\insertauthor
	\end{beamercolorbox}
}
%\makeatother

\mode
<all>